<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>My page</title>
    <link
      rel="stylesheet"
      href="{{url_for('static', filename='css/mypage.css')}}"
    />
    <link
      rel="stylesheet"
      href="{{url_for('static', filename='css/new.css')}}"
    />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
      integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
      crossorigin="anonymous"
    />
  </head>

  <body>
    {% extends "_layout.html" %} {% block content %}
    <div class="pagelayout">
      <img
        id="profileImage"
        style="width: 100px; border-radius: 50%;"
        src="https://nextagram-test.s3-ap-southeast-1.amazonaws.com/{{current_user.profile_image}}"
      />

      <div id="myModal" class="modal">
        <!-- The Close Button -->
        <span class="close">&times;</span>

        <!-- Modal Content (The Image) -->
        <img class="modal-content" id="img01" />

        <!-- Modal Caption (Image Text) -->
        <div id="caption"></div>
      </div>
      <h3>Name:{{current_user.username}}</h3>
      <h3>id:{{current_user.id}}</h3>
      <form
        action="{{url_for('users.upload_profile_image', id=current_user.id)}}"
        method="POST"
        enctype="multipart/form-data"
      >
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
        <label id="label" for="upload_profile_image"
          >Upload profile image:</label
        >
        <input
          type="file"
          class="form-control"
          id="upload_profile_image"
          name="upload_profile_image"
        />
        <button type="submit" class="btn btn-info">Save</button>
      </form>

      <script
        src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
        integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
        crossorigin="anonymous"
      ></script>
      <script
        src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
        crossorigin="anonymous"
      ></script>
      <script
        src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
        integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
        crossorigin="anonymous"
      ></script>

      <script>
        var modal = document.getElementById("myModal");

        // Get the image and insert it inside the modal - use its "alt" text as a caption
        var img = document.getElementById("profileImage");
        var modalImg = document.getElementById("img01");
        var captionText = document.getElementById("caption");
        img.onclick = function () {
          modal.style.display = "block";
          modalImg.src = this.src;
          captionText.innerHTML = this.alt;
        };

        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];

        // When the user clicks on <span> (x), close the modal
        span.onclick = function () {
          modal.style.display = "none";
        };
      </script>
    </div>
    {% endblock %}
  </body>
</html>
